<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Generator Size Calculator ‚Äì Generator Solutions</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --midnight: #020921;
      --midnight-soft: #07142e;
      --accent-orange: #f58a1f;
      --accent-blue: #245bb4;
      --text-light: #f5f7ff;
      --text-muted: #b6c2e3;
      --card-bg: #050b1b;
      --danger: #f97373;
      --ok: #4ade80;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #0b1f4a 0, var(--midnight) 45%, #000 100%);
      color: var(--text-light);
      padding: 24px 16px 40px;
      display: flex;
      justify-content: center;
    }

    .page-wrap {
      width: 100%;
      max-width: 1100px;
    }

    header {
      text-align: center;
      margin-bottom: 24px;
    }

    .brand {
      font-size: 1rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    h1 {
      font-size: 1.9rem;
      margin-bottom: 8px;
    }

    .tagline {
      font-size: 0.98rem;
      color: var(--text-muted);
      max-width: 640px;
      margin: 0 auto;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.5fr) minmax(0, 1.1fr);
      gap: 20px;
      margin-top: 26px;
    }

    @media (max-width: 900px) {
      .layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: radial-gradient(circle at top, #101935 0, var(--card-bg) 55%);
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.05);
      padding: 18px 18px 22px;
      box-shadow:
        0 20px 50px rgba(0,0,0,0.65),
        0 0 0 1px rgba(255,255,255,0.02);
    }

    .card h2 {
      font-size: 1.2rem;
      margin-bottom: 6px;
    }

    .card-sub {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 14px;
    }

    .section-title {
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--text-muted);
      margin: 14px 0 6px;
    }

    label {
      font-size: 0.92rem;
      display: block;
      margin-bottom: 5px;
    }

    select, input[type="number"], input[type="text"], input[type="email"] {
      width: 100%;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(3,7,18,0.85);
      color: var(--text-light);
      font-size: 0.95rem;
      outline: none;
    }

    select:focus, input[type="number"]:focus, input[type="text"]:focus, input[type="email"]:focus {
      border-color: var(--accent-orange);
      box-shadow: 0 0 0 1px rgba(245,138,31,0.4);
    }

    .grid-2 {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px 12px;
    }

    .grid-3 {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px 10px;
    }

    .pill-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .pill-toggle {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(15,23,42,0.9);
      font-size: 0.86rem;
      cursor: pointer;
      user-select: none;
    }

    .pill-toggle input {
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }

    .pill-toggle span {
      pointer-events: none;
    }

    .pill-toggle input:checked + span {
      color: #020617;
      font-weight: 600;
    }

    .pill-toggle input:checked ~ .pill-bg {
      opacity: 1;
      transform: scale(1);
    }

    .pill-bg {
      position: absolute;
      inset: -1px;
      border-radius: inherit;
      background: radial-gradient(circle at top, #fed7aa, #f97316);
      opacity: 0;
      transform: scale(0.9);
      transition: all 0.16s ease-out;
      z-index: -1;
    }

    .checkbox-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 6px 10px;
    }

    @media (max-width: 600px) {
      .checkbox-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .checkbox-item {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.9rem;
    }

    .checkbox-item input {
      width: 16px;
      height: 16px;
    }

    .radio-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .radio-row label {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      cursor: pointer;
      font-size: 0.9rem;
      background: rgba(15,23,42,0.9);
    }

    .radio-row input[type="radio"] {
      width: 14px;
      height: 14px;
    }

    .buttons-row {
      margin-top: 18px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    button {
      border: none;
      border-radius: 999px;
      padding: 9px 16px;
      font-size: 0.95rem;
      cursor: pointer;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .btn-primary {
      background: linear-gradient(135deg, #fbbf24, #f97316);
      color: #020617;
      box-shadow:
        0 0 20px rgba(248, 250, 252, 0.25),
        0 8px 25px rgba(0,0,0,0.9);
    }

    .btn-secondary {
      background: rgba(15,23,42,0.95);
      color: var(--text-light);
      border: 1px solid rgba(148,163,184,0.4);
    }

    .btn-primary:hover {
      filter: brightness(1.05);
    }

    .btn-secondary:hover {
      border-color: var(--accent-orange);
    }

    .result-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 6px;
    }

    .badge {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.5);
      color: var(--text-muted);
    }

    .result-main {
      font-size: 2rem;
      font-weight: 700;
    }

    .result-sub {
      font-size: 0.95rem;
      color: var(--text-muted);
      margin: 4px 0 10px;
    }

    .tag-pills {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
    }

    .tag {
      font-size: 0.78rem;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(148,163,184,0.5);
    }

    .tag.ok { border-color: var(--ok); color: var(--ok); }
    .tag.warn { border-color: var(--danger); color: var(--danger); }

    .summary-list {
      list-style: none;
      font-size: 0.88rem;
      color: var(--text-muted);
      margin: 8px 0 12px;
    }

    .summary-list li {
      margin-bottom: 4px;
    }

    .cta-box {
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px dashed rgba(250,250,250,0.18);
      background: rgba(15,23,42,0.7);
      font-size: 0.88rem;
    }

    .cta-box strong {
      color: var(--accent-orange);
    }

    .email-section {
      margin-top: 14px;
      border-top: 1px solid rgba(148,163,184,0.35);
      padding-top: 10px;
    }

    .email-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr);
      gap: 8px 10px;
      margin-bottom: 8px;
    }

    @media (max-width: 700px) {
      .email-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .email-note {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .notice {
      font-size: 0.8rem;
      margin-top: 6px;
      color: var(--text-muted);
    }
  </style>
</head>
<body>
  <div class="page-wrap">
    <header>
      <div class="brand" style="margin-bottom: 12px;">
  <img src="logo.png" alt="Generator Solutions Logo" 
       style="height: 70px; width:auto; filter: drop-shadow(0 0 4px rgba(255,255,255,0.7));">
</div>

      <h1>Home Standby Generator Size Calculator</h1>
      <p class="tagline">
        Answer a few quick questions and we‚Äôll estimate the right standby generator size for your home. 
        This is a planning tool only ‚Äî final sizing will always be determined by our team.
      </p>
    </header>

    <main class="layout">
      <!-- LEFT: INPUTS -->
      <section class="card">
        <h2>Your Home & Power Needs</h2>
        <p class="card-sub">
          Start with the basics, then choose the major systems and appliances you want powered during an outage.
        </p>

        <!-- Home size -->
        <div class="section-title">Home Size</div>
        <label for="sqftRange">Approximate heated living area</label>
        <select id="sqftRange">
          <option value="0">Select a range‚Ä¶</option>
          <option value="1">Up to 1,500 sq. ft.</option>
          <option value="2">1,500 ‚Äì 2,500 sq. ft.</option>
          <option value="3">2,500 ‚Äì 3,500 sq. ft.</option>
          <option value="4">3,500+ sq. ft.</option>
        </select>

        <!-- Heating type -->
        <div class="section-title">Primary Heating Type</div>
        <div class="grid-2">
          <label>
            <span>Propane furnace</span>
            <select id="heatType">
              <option value="propane">Propane furnace</option>
              <option value="electric">Electric furnace</option>
              <option value="heatpump">Heat pump</option>
              <option value="wood">Wood stove / wood heat</option>
              <option value="baseboard">Electric baseboards</option>
              <option value="radiant">Radiant floor (electric)</option>
            </select>
          </label>

          <label>
            <span>Well pump (if applicable)</span>
            <select id="wellPump">
              <option value="none">No well / municipal water</option>
              <option value="0.5">1/2 HP well pump</option>
              <option value="0.75">3/4 HP well pump</option>
              <option value="1.0">1 HP well pump</option>
            </select>
          </label>
        </div>

        <!-- Cooling / AC -->
        <div class="section-title">Cooling / Air Conditioning</div>
        <div class="pill-group" id="acGroup">
          <label class="pill-toggle">
            <input type="radio" name="ac" value="none" checked />
            <span>No central AC / no mini-split</span>
            <div class="pill-bg"></div>
          </label>
          <label class="pill-toggle">
            <input type="radio" name="ac" value="small" />
            <span>Central AC (2‚Äì3 tons)</span>
            <div class="pill-bg"></div>
          </label>
          <label class="pill-toggle">
            <input type="radio" name="ac" value="large" />
            <span>Central AC (3‚Äì4 tons)</span>
            <div class="pill-bg"></div>
          </label>
          <label class="pill-toggle">
            <input type="radio" name="ac" value="heatpump" />
            <span>Heat pump</span>
            <div class="pill-bg"></div>
          </label>
          <label class="pill-toggle">
            <input type="radio" name="ac" value="minisplit" />
            <span>Mini-split(s)</span>
            <div class="pill-bg"></div>
          </label>
        </div>

        <!-- Appliances -->
        <div class="section-title">Appliances to Power</div>
        <p style="font-size:0.82rem;color:var(--text-muted);margin-bottom:6px;">
          Check the items you want powered during an outage.
        </p>
        <div class="checkbox-grid" id="applianceGroup">
          <label class="checkbox-item">
            <input type="checkbox" value="fridge" checked />
            <span>Fridge</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" value="freezer" />
            <span>Freezer</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" value="microwave" />
            <span>Microwave</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" value="elecStove" />
            <span>Electric stove / oven</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" value="gasStoveIgnitor" />
            <span>Gas stove ignitor only</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" value="dishwasher" />
            <span>Dishwasher</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" value="washer" />
            <span>Washer</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" value="dryerElec" />
            <span>Electric dryer</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" value="dryerGas" />
            <span>Gas dryer (motor only)</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" value="sump" />
            <span>Sump pump</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" value="hotTub" />
            <span>Hot tub</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" value="poolPump" />
            <span>Pool pump</span>
          </label>
        </div>

        <!-- Priority mode -->
        <div class="section-title">Coverage Level</div>
        <div class="radio-row">
          <label>
            <input type="radio" name="mode" value="essential" checked />
            <span>Essential loads only</span>
          </label>
          <label>
            <input type="radio" name="mode" value="wholehome" />
            <span>Whole-home (as close as practical)</span>
          </label>
        </div>

        <div class="buttons-row">
          <button class="btn-primary" type="button" onclick="calculateSize()">
            ‚ö° Calculate Recommended Size
          </button>
          <button class="btn-secondary" type="button" onclick="resetForm()">
            Reset
          </button>
        </div>
      </section>

      <!-- RIGHT: RESULTS -->
      <section class="card" id="resultsCard">
        <div class="result-header">
          <h2>Recommended Generator Size</h2>
          <span class="badge" id="coverageBadge">Waiting for inputs‚Ä¶</span>
        </div>
        <div id="resultSize" class="result-main">‚Äî kW</div>
        <p id="resultType" class="result-sub">
          Complete the form on the left and we‚Äôll suggest an air-cooled or liquid-cooled standby generator.
        </p>

        <div class="tag-pills" id="tagPills"></div>

        <ul class="summary-list" id="summaryList">
          <li>Square footage: ‚Äî</li>
          <li>Heating: ‚Äî</li>
          <li>Cooling: ‚Äî</li>
          <li>Well pump: ‚Äî</li>
          <li>Appliances selected: ‚Äî</li>
        </ul>

        <div class="cta-box">
          <strong>Next step:</strong> Book an on-site assessment so we can confirm wiring, loads and location,
          and give you a tailored quote based on this recommendation.
        </div>

        <div class="buttons-row" style="margin-top:12px;">
          <button class="btn-primary" type="button" onclick="scrollToEmail()">
            üìß Email These Results
          </button>
          <button class="btn-secondary" type="button" onclick="bookAssessment()">
            üìç Book an On-Site Assessment
          </button>
        </div>

        <!-- Email section -->
        <div class="email-section" id="emailSection">
          <h3 style="font-size:1rem;margin-bottom:4px;">Email Summary</h3>
          <p class="email-note">
            We‚Äôll prepare an email with your results that you can send to yourself (and to Generator Solutions) for reference.
          </p>

          <div class="email-grid">
            <label>
              <span style="font-size:0.85rem;">Your name</span>
              <input type="text" id="custName" placeholder="e.g. Jane Smith" />
            </label>
            <label>
              <span style="font-size:0.85rem;">Your email address</span>
              <input type="email" id="custEmail" placeholder="you@example.com" />
            </label>
          </div>

          <div class="buttons-row">
            <button class="btn-primary" type="button" onclick="openEmailDraft()">
              ‚úâÔ∏è Open Email Draft
            </button>
          </div>
          <p class="notice">
            This uses your device‚Äôs email app to create a draft addressed to 
            <strong>sales@generatorsolutions.ca</strong> with you on copy. 
            You can review and send it from there.
          </p>
        </div>
      </section>
    </main>
  </div>

  <script>
    // Simple mapping text helpers
    function getSqftLabel(val) {
      switch (val) {
        case "1": return "Up to 1,500 sq. ft.";
        case "2": return "1,500 ‚Äì 2,500 sq. ft.";
        case "3": return "2,500 ‚Äì 3,500 sq. ft.";
        case "4": return "3,500+ sq. ft.";
        default: return "Not specified";
      }
    }

    function getHeatLabel(val) {
      switch (val) {
        case "propane": return "Propane furnace";
        case "electric": return "Electric furnace";
        case "heatpump": return "Heat pump";
        case "wood": return "Wood stove / wood heat";
        case "baseboard": return "Electric baseboards";
        case "radiant": return "Radiant floor (electric)";
        default: return "Not specified";
      }
    }

    function getAcLabel(val) {
      switch (val) {
        case "none": return "No central AC / no mini-split";
        case "small": return "Central AC (2‚Äì3 tons)";
        case "large": return "Central AC (3‚Äì4 tons)";
        case "heatpump": return "Heat pump";
        case "minisplit": return "Mini-split(s)";
        default: return "Not specified";
      }
    }

    function getWellLabel(val) {
      switch (val) {
        case "0.5": return "1/2 HP well pump";
        case "0.75": return "3/4 HP well pump";
        case "1.0": return "1 HP well pump";
        default: return "No well / municipal water";
      }
    }

    function calculateSize() {
      const sqftVal = document.getElementById("sqftRange").value;
      const heatType = document.getElementById("heatType").value;
      const wellVal = document.getElementById("wellPump").value;

      const acRadio = document.querySelector('input[name="ac"]:checked');
      const acVal = acRadio ? acRadio.value : "none";

      const modeRadio = document.querySelector('input[name="mode"]:checked');
      const mode = modeRadio ? modeRadio.value : "essential";

      const appliances = Array.from(
        document.querySelectorAll('#applianceGroup input[type="checkbox"]:checked')
      ).map(cb => cb.value);

      // Rough internal "load score" ‚Äì intentionally conservative, can be tuned
      let loadScore = 0;

      // Base by square footage
      switch (sqftVal) {
        case "1": loadScore += 6; break;
        case "2": loadScore += 10; break;
        case "3": loadScore += 14; break;
        case "4": loadScore += 18; break;
        default: loadScore += 0; break;
      }

      // Heating impact
      switch (heatType) {
        case "propane":
          loadScore += 2; // blower only
          break;
        case "electric":
          loadScore += 12;
          break;
        case "heatpump":
          loadScore += 8;
          break;
        case "wood":
          loadScore += 0; // minimal electrical
          break;
        case "baseboard":
          loadScore += 10;
          break;
        case "radiant":
          loadScore += 10;
          break;
      }

      // AC / cooling
      switch (acVal) {
        case "none": break;
        case "small": loadScore += 6; break;
        case "large": loadScore += 9; break;
        case "heatpump": loadScore += 8; break;
        case "minisplit": loadScore += 4; break;
      }

      // Well pump
      switch (wellVal) {
        case "0.5": loadScore += 2; break;
        case "0.75": loadScore += 3; break;
        case "1.0": loadScore += 4; break;
      }

      // Appliances ‚Äì rough kW equivalents
      const applianceMap = {
        fridge: 1,
        freezer: 1,
        microwave: 1.5,
        elecStove: 6,
        gasStoveIgnitor: 0.3,
        dishwasher: 1.5,
        washer: 1,
        dryerElec: 5,
        dryerGas: 1,
        sump: 2,
        hotTub: 6,
        poolPump: 3
      };

      appliances.forEach(a => {
        loadScore += applianceMap[a] || 0;
      });

      // Essential vs whole-home
      let effectiveKw = loadScore;
      let coverageLabel = "";
      if (mode === "essential") {
        effectiveKw = Math.max(8, loadScore * 0.7); // keep reasonable floor
        coverageLabel = "Essential Loads";
      } else {
        coverageLabel = "Whole-Home (approx.)";
      }

      // Add headroom margin
      effectiveKw *= 1.25;

      // Now snap to recommended sizes
      let recommendedKw = 14;
      const airCooledSizes = [14, 18, 24, 28]; // Next Gen air-cooled
      const liquidCooledSizes = [32, 38, 48, 60, 80, 100, 150];

      let type = "Air-cooled standby (Next Generation 2026)";
      let notes = "";

      if (effectiveKw <= 10) {
        recommendedKw = 14;
        type = "Air-cooled standby (Next Generation 2026)";
        notes = "For your selections, a 14 kW air-cooled unit should comfortably handle your essential loads.";
      } else if (effectiveKw <= 16) {
        recommendedKw = 18;
        type = "Air-cooled standby (Next Generation 2026)";
        notes = "An 18 kW air-cooled standby generator is a solid match for your home and selected loads.";
      } else if (effectiveKw <= 22) {
        recommendedKw = 24;
        type = "Air-cooled standby (Next Generation 2026)";
        notes = "A 24 kW air-cooled unit provides more headroom and better whole-home coverage.";
      } else if (effectiveKw <= 28) {
        recommendedKw = 28;
        type = "Air-cooled standby (Next Generation 2026)";
        notes = "A 28 kW air-cooled standby generator is recommended for your load profile.";
      } else {
        // Liquid-cooled territory
        type = "Liquid-cooled standby (commercial-grade)";
        if (effectiveKw <= 32) {
          recommendedKw = 32;
          notes = "You‚Äôre into higher-demand territory. A 32 kW liquid-cooled unit with the new 4.5 L engine is recommended.";
        } else if (effectiveKw <= 38) {
          recommendedKw = 38;
          notes = "We recommend a 38 kW liquid-cooled unit with the 4.5 L engine for robust whole-home coverage.";
        } else if (effectiveKw <= 48) {
          recommendedKw = 48;
          notes = "A 48 kW liquid-cooled generator (4.5 L engine) is a strong fit for your selected loads.";
        } else if (effectiveKw <= 60) {
          recommendedKw = 60;
          notes = "You‚Äôre into larger-load territory. A 60 kW liquid-cooled unit is recommended.";
        } else if (effectiveKw <= 80) {
          recommendedKw = 80;
          notes = "We suggest an 80 kW liquid-cooled standby generator based on your selections.";
        } else if (effectiveKw <= 100) {
          recommendedKw = 100;
          notes = "A 100 kW liquid-cooled standby is appropriate for extensive whole-home and facility loads.";
        } else {
          recommendedKw = 150;
          notes = "Your selections indicate very high demand. A 150 kW liquid-cooled standby generator should be considered.";
        }
      }

      updateResults({
        sqftVal,
        heatType,
        wellVal,
        acVal,
        appliances,
        mode,
        effectiveKw,
        recommendedKw,
        type,
        notes
      });
    }

    function updateResults(data) {
      const {
        sqftVal,
        heatType,
        wellVal,
        acVal,
        appliances,
        mode,
        effectiveKw,
        recommendedKw,
        type,
        notes
      } = data;

      const resultSizeEl = document.getElementById("resultSize");
      const resultTypeEl = document.getElementById("resultType");
      const coverageBadge = document.getElementById("coverageBadge");
      const tagPills = document.getElementById("tagPills");
      const summaryList = document.getElementById("summaryList");

      resultSizeEl.textContent = `${recommendedKw.toFixed(0)} kW`;
      resultTypeEl.textContent = notes || type;

      coverageBadge.textContent = mode === "essential"
        ? "Essential load estimate"
        : "Whole-home estimate";

      tagPills.innerHTML = "";

      const essentialTag = document.createElement("span");
      essentialTag.className = "tag";
      essentialTag.textContent = mode === "essential"
        ? "Focus: Essential comfort & safety"
        : "Focus: Whole-home coverage";
      tagPills.appendChild(essentialTag);

      const typeTag = document.createElement("span");
      typeTag.className = "tag";
      typeTag.textContent = type;
      tagPills.appendChild(typeTag);

      const headroomTag = document.createElement("span");
      headroomTag.className = "tag ok";
      headroomTag.textContent = "Includes safety headroom";
      tagPills.appendChild(headroomTag);

      // Update summary
      const items = [];
      items.push(`Square footage: ${getSqftLabel(sqftVal)}`);
      items.push(`Heating: ${getHeatLabel(heatType)}`);
      items.push(`Cooling: ${getAcLabel(acVal)}`);
      items.push(`Well pump: ${getWellLabel(wellVal)}`);
      items.push(
        `Appliances selected: ${appliances.length ? appliances.length : "None selected"}`
      );

      summaryList.innerHTML = "";
      items.forEach(txt => {
        const li = document.createElement("li");
        li.textContent = txt;
        summaryList.appendChild(li);
      });

      // Store latest results globally for email composition
      window._lastCalc = {
        recommendedKw,
        type,
        notes,
        sqftLabel: getSqftLabel(sqftVal),
        heatLabel: getHeatLabel(heatType),
        acLabel: getAcLabel(acVal),
        wellLabel: getWellLabel(wellVal),
        mode: mode === "essential" ? "Essential loads" : "Whole-home (approx.)",
        appliancesCount: appliances.length
      };
    }

    function resetForm() {
      document.getElementById("sqftRange").value = "0";
      document.getElementById("heatType").value = "propane";
      document.getElementById("wellPump").value = "none";

      document.querySelectorAll('input[name="ac"]').forEach((r, idx) => {
        r.checked = idx === 0;
      });

      document.querySelectorAll('#applianceGroup input[type="checkbox"]').forEach(cb => {
        cb.checked = cb.value === "fridge";
      });

      document.querySelectorAll('input[name="mode"]').forEach((r, idx) => {
        r.checked = idx === 0;
      });

      document.getElementById("resultSize").textContent = "‚Äî kW";
      document.getElementById("resultType").textContent =
        "Complete the form on the left and we‚Äôll suggest an air-cooled or liquid-cooled standby generator.";
      document.getElementById("coverageBadge").textContent = "Waiting for inputs‚Ä¶";
      document.getElementById("tagPills").innerHTML = "";
      document.getElementById("summaryList").innerHTML = `
        <li>Square footage: ‚Äî</li>
        <li>Heating: ‚Äî</li>
        <li>Cooling: ‚Äî</li>
        <li>Well pump: ‚Äî</li>
        <li>Appliances selected: ‚Äî</li>
      `;
      window._lastCalc = null;
    }

    function scrollToEmail() {
      document.getElementById("emailSection").scrollIntoView({ behavior: "smooth", block: "start" });
    }

    function bookAssessment() {
      // You can change this to your booking page URL when ready
      window.location.href = "mailto:sales@generatorsolutions.ca?subject=On-Site%20Generator%20Assessment%20Request";
    }

    function openEmailDraft() {
      const calc = window._lastCalc;
      const name = document.getElementById("custName").value.trim();
      const email = document.getElementById("custEmail").value.trim();

      if (!calc) {
        alert("Please run the calculator first so we can include your results.");
        return;
      }
      if (!email) {
        alert("Please enter your email address so we can include it in the message.");
        return;
      }

      const subject = encodeURIComponent("Generator Size Estimate ‚Äì Generator Solutions");

      const lines = [];
      lines.push("Hello Generator Solutions Team,");
      lines.push("");
      lines.push("Here are my generator sizing results from your online calculator:");
      lines.push("");
      lines.push(`‚Ä¢ Recommended size: ${calc.recommendedKw.toFixed(0)} kW`);
      lines.push(`‚Ä¢ Generator type: ${calc.type}`);
      if (calc.notes) {
        lines.push(`‚Ä¢ Notes: ${calc.notes}`);
      }
      lines.push("");
      lines.push("Home & load details:");
      lines.push(`‚Ä¢ Coverage level: ${calc.mode}`);
      lines.push(`‚Ä¢ Square footage: ${calc.sqftLabel}`);
      lines.push(`‚Ä¢ Heating: ${calc.heatLabel}`);
      lines.push(`‚Ä¢ Cooling: ${calc.acLabel}`);
      lines.push(`‚Ä¢ Well pump: ${calc.wellLabel}`);
      lines.push(`‚Ä¢ Number of appliances selected: ${calc.appliancesCount}`);
      lines.push("");
      lines.push("My contact details:");
      lines.push(`‚Ä¢ Name: ${name || "(not provided)"}`);
      lines.push(`‚Ä¢ Email: ${email}`);
      lines.push("");
      lines.push("Please contact me to discuss options and book an on-site assessment.");
      lines.push("");
      lines.push("Thank you!");

      const body = encodeURIComponent(lines.join("\n"));

      // Email goes to sales@ with customer in CC
      const mailto = `mailto:sales@generatorsolutions.ca?cc=${encodeURIComponent(email)}&subject=${subject}&body=${body}`;
      window.location.href = mailto;
    }
  </script>
</body>
</html>




